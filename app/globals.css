@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
  }

  * {
    border-color: theme("colors.neutral.200");
  }

  body {
    @apply bg-white text-neutral-900;
    font-feature-settings:
      "rlig" 1,
      "calt" 1;
  }
}

@layer components {
  .container {
    @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  .btn-primary {
    @apply bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors;
  }

  .btn-secondary {
    @apply bg-neutral-200 text-neutral-800 px-4 py-2 rounded-lg hover:bg-neutral-300 transition-colors;
  }

  .card {
    @apply bg-white rounded-lg shadow-sm border border-neutral-200 p-6;
  }
}

/* Loading animations */
@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Sidebar styles */
@layer utilities {
  .sidebar-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgb(229 231 235) transparent;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar {
    width: 4px;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-thumb {
    background: rgb(229 231 235);
    border-radius: 2px;
  }
  
  .sidebar-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgb(209 213 219);
  }
  
  .sidebar-backdrop {
    backdrop-filter: blur(2px);
  }
}

/* Tooltip animations */
@keyframes tooltip-fade-in {
  0% {
    opacity: 0;
    transform: translate(0, 0) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translate(0, 0) scale(1);
  }
}

.tooltip-enter {
  animation: tooltip-fade-in 200ms ease-out;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes goal-celebration {
  0% { transform: scale(1); }
  20% { transform: scale(1.05); }
  40% { transform: scale(0.95); }
  60% { transform: scale(1.02); }
  80% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

@keyframes confetti-pop {
  0% { 
    opacity: 0; 
    transform: translateX(-50%) translateY(0) scale(0); 
  }
  20% { 
    opacity: 1; 
    transform: translateX(-50%) translateY(-10px) scale(1.2); 
  }
  100% { 
    opacity: 0; 
    transform: translateX(-50%) translateY(-30px) scale(0.8); 
  }
}

@keyframes success-bounce {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

@keyframes water-fill {
  0% { 
    transform: scaleY(0);
    transform-origin: bottom;
  }
  100% { 
    transform: scaleY(1);
    transform-origin: bottom;
  }
}

@keyframes badge-appear {
  0% { 
    opacity: 0;
    transform: scale(0) rotate(180deg);
  }
  70% { 
    opacity: 1;
    transform: scale(1.1) rotate(0deg);
  }
  100% { 
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

@keyframes toast-slide {
  0% { 
    opacity: 0;
    transform: translateY(-100%) scale(0.8);
  }
  100% { 
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes swipe-left {
  0% { transform: translateX(0); }
  50% { transform: translateX(-20px); opacity: 0.8; }
  100% { transform: translateX(0); }
}

@keyframes swipe-right {
  0% { transform: translateX(0); }
  50% { transform: translateX(20px); opacity: 0.8; }
  100% { transform: translateX(0); }
}

@keyframes swipe-up {
  0% { transform: translateY(0); }
  50% { transform: translateY(-20px); opacity: 0.8; }
  100% { transform: translateY(0); }
}

@keyframes swipe-down {
  0% { transform: translateY(0); }
  50% { transform: translateY(20px); opacity: 0.8; }
  100% { transform: translateY(0); }
}

/* Pregnancy & Health-Focused Color System */
@layer utilities {
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .skeleton-loading {
    @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200;
    background-size: 200% 100%;
    animation: loading 1.5s ease-in-out infinite;
  }

  /* Nutrition Status Colors */
  .nutrition-success {
    @apply bg-emerald-50 border-emerald-200 text-emerald-700;
  }
  
  .nutrition-warning {
    @apply bg-amber-50 border-amber-200 text-amber-700;
  }
  
  .nutrition-danger {
    @apply bg-rose-50 border-rose-200 text-rose-700;
  }
  
  .nutrition-info {
    @apply bg-sky-50 border-sky-200 text-sky-700;
  }

  /* Glucose Level Colors */
  .glucose-normal {
    @apply bg-green-50 border-green-200 text-green-800;
  }
  
  .glucose-elevated {
    @apply bg-yellow-50 border-yellow-200 text-yellow-800;
  }
  
  .glucose-high {
    @apply bg-red-50 border-red-200 text-red-800;
  }
  
  .glucose-low {
    @apply bg-blue-50 border-blue-200 text-blue-800;
  }

  /* Achievement & Success States */
  .achievement-glow {
    @apply bg-gradient-to-r from-green-50 to-emerald-50 border-green-200;
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.15);
  }
  
  .goal-reached {
    @apply bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border-green-300;
    animation: goal-celebration 3s ease-in-out;
  }

  /* Micro-interactions & Celebrations */
  .confetti-burst {
    position: relative;
    overflow: visible;
  }

  .confetti-burst::before {
    content: 'ðŸŽ‰';
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    animation: confetti-pop 2s ease-out;
    pointer-events: none;
    z-index: 10;
  }

  .success-bounce {
    animation: success-bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  .button-ripple {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .button-ripple:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .button-ripple:active {
    transform: translateY(0);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .number-counter {
    transition: all 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .water-fill {
    animation: water-fill 2s ease-in-out;
  }

  .quick-snack-hover {
    transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .quick-snack-hover:hover {
    transform: scale(1.05) rotate(2deg);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .achievement-badge {
    animation: badge-appear 1s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  .toast-slide-in {
    animation: toast-slide 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
  }

  /* Mobile Touch Gestures */
  .swipe-left {
    animation: swipe-left 0.3s ease-out;
  }

  .swipe-right {
    animation: swipe-right 0.3s ease-out;
  }

  .swipe-up {
    animation: swipe-up 0.3s ease-out;
  }

  .swipe-down {
    animation: swipe-down 0.3s ease-out;
  }

  .touch-feedback {
    transition: all 0.1s ease-out;
  }

  .touch-feedback:active {
    transform: scale(0.95);
    opacity: 0.8;
  }

  /* Mobile-specific interactive elements */
  .mobile-card-swipeable {
    position: relative;
    transition: transform 0.2s ease-out;
  }

  .mobile-card-swipeable.swiping {
    transition: none;
  }

  .mobile-floating-button {
    @apply fixed bottom-20 right-4 w-14 h-14 bg-primary-600 text-white rounded-full shadow-lg flex items-center justify-center z-40;
    transition: all 0.2s ease-out;
  }

  .mobile-floating-button:active {
    transform: scale(0.9);
  }

  .mobile-sticky-header {
    @apply sticky top-0 bg-white/95 backdrop-blur-sm border-b border-neutral-200 z-30;
  }

  /* Pregnancy-Safe Color Palette */
  .pregnancy-primary {
    @apply bg-gradient-to-r from-pink-500 to-rose-500 text-white;
  }
  
  .pregnancy-secondary {
    @apply bg-gradient-to-r from-purple-500 to-pink-500 text-white;
  }
  
  .pregnancy-accent {
    @apply bg-gradient-to-r from-indigo-500 to-purple-500 text-white;
  }

  /* Health Warning Colors */
  .health-critical {
    @apply bg-red-100 border-red-300 text-red-800;
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.2);
  }
  
  .health-caution {
    @apply bg-orange-100 border-orange-300 text-orange-800;
  }
  
  .health-good {
    @apply bg-green-100 border-green-300 text-green-800;
  }

  /* Meal Timing Colors */
  .meal-breakfast {
    @apply bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200 text-orange-800;
  }
  
  .meal-lunch {
    @apply bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 text-green-800;
  }
  
  .meal-dinner {
    @apply bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200 text-blue-800;
  }
  
  .meal-snack {
    @apply bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200 text-purple-800;
  }

  /* Progress & Loading States */
  .progress-excellent {
    @apply bg-gradient-to-r from-green-400 to-emerald-500;
  }
  
  .progress-good {
    @apply bg-gradient-to-r from-blue-400 to-cyan-500;
  }
  
  .progress-needs-improvement {
    @apply bg-gradient-to-r from-yellow-400 to-orange-500;
  }
  
  .progress-poor {
    @apply bg-gradient-to-r from-red-400 to-rose-500;
  }

  /* Meal card image loading state */
  .meal-card-image-loading {
    @apply bg-gray-200;
    background: linear-gradient(90deg, #f3f4f6 25%, #e5e7eb 50%, #f3f4f6 75%);
    background-size: 200% 100%;
    animation: loading 1.5s ease-in-out infinite;
  }

  /* Better focus states */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2;
  }

  /* Performance optimizations */
  .optimized-transform {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  .gpu-accelerated {
    will-change: transform;
    transform: translateZ(0);
  }

  /* Accessibility improvements */
  .screen-reader-only {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }

  .high-contrast-mode {
    --primary: #000000;
    --secondary: #ffffff;
    --accent: #0000ff;
    --text: #000000;
    --background: #ffffff;
  }

  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    .auto-dark {
      background-color: #1a1a1a;
      color: #ffffff;
    }
    
    .auto-dark .card {
      background-color: #2d2d2d;
      border-color: #404040;
    }
  }

  /* Print optimizations */
  @media print {
    .no-print {
      display: none !important;
    }
    
    .print-break-before {
      break-before: page;
    }
    
    .print-break-after {
      break-after: page;
    }
    
    * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  }

  /* Improved button hierarchy */
  .btn-view {
    @apply bg-transparent border border-gray-300 text-gray-600 hover:bg-gray-50 text-sm px-3 py-1;
  }

  /* Recipe count loading */
  .recipe-count-loading::after {
    content: "loading...";
    @apply text-gray-500 animate-pulse;
  }
}

/* Improve dietary checkbox touch targets for mobile */
@media (max-width: 768px) {
  .dietary-checkbox {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Mobile-specific improvements */
@media (max-width: 640px) {
  /* Better spacing on mobile */
  .container {
    @apply px-3;
  }
  
  /* Smaller cards on mobile */
  .card {
    @apply p-4;
  }
  
  /* Stack elements on mobile */
  .mobile-stack {
    @apply flex flex-col space-y-2;
  }
  
  /* Improve touch targets */
  button {
    @apply min-h-[44px];
  }
  
  /* Responsive text sizes */
  h1 {
    @apply text-2xl;
  }
  
  h2 {
    @apply text-xl;
  }
  
  h3 {
    @apply text-lg;
  }

  /* Mobile-optimized meal cards */
  .meal-card-mobile {
    @apply p-4 space-y-3;
  }

  .meal-card-mobile .meal-header {
    @apply flex-col items-start space-y-2;
  }

  .meal-card-mobile .meal-icon {
    @apply w-10 h-10 text-lg;
  }

  /* Mobile swipe indicators */
  .swipe-indicator {
    @apply absolute right-2 top-1/2 transform -translate-y-1/2 opacity-30;
    content: 'â†’';
  }

  /* Bottom action sheet */
  .mobile-action-sheet {
    @apply fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl border-t border-neutral-200 p-4 transform transition-transform duration-300;
  }

  .mobile-action-sheet.closed {
    @apply translate-y-full;
  }

  /* Mobile navigation tabs */
  .mobile-nav-tabs {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 grid grid-cols-5 py-2;
  }

  .mobile-nav-tab {
    @apply flex flex-col items-center justify-center py-2 px-1 text-xs min-h-[60px];
  }

  .mobile-nav-tab.active {
    @apply text-primary-600;
  }

  /* Pull to refresh indicator */
  .pull-refresh-indicator {
    @apply absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full bg-white rounded-b-lg px-4 py-2 shadow-lg transition-transform duration-200;
  }

  .pull-refresh-indicator.active {
    @apply translate-y-0;
  }
}

/* Recipe placeholder image loading state */
.meal-card-image-loading {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.2) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 200% auto;
  animation: loading 1.5s linear infinite;
}
